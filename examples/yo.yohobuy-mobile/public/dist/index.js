define("yohobuy-mobile/index",["jquery/jquery","iscroll/iscroll-probe","mlellipsis/mlellipsis","lazyload/jquery.lazyload","flexslider/jquery.flexslider","mustache/mustache","nprogress-183/nprogress","jquery-pjax-183/index","underscore/underscore","import-style/index"],function(e,t,i){var o;e("yohobuy-mobile/js/saunter"),e("yohobuy-mobile/js/tag"),e("yohobuy-mobile/js/ps"),e("yohobuy-mobile/js/template"),i.exports=o}),define("yohobuy-mobile/js/saunter",["jquery/jquery","iscroll/iscroll-probe","mlellipsis/mlellipsis","lazyload/jquery.lazyload"],function(e,t,i){function o(e,t){var i,o={effect:"fadeIn",effect_speed:10,placeholder:"data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///93d3f///yH5BAEAAAMALAAAAAABAAEAAAICVAEAOw=="};i="undefined"==typeof e?n("img.lazy"):e,"undefined"!=typeof t&&n.extend(o,t),i.lazyload(o)}var n=e("jquery/jquery"),a=e("iscroll/iscroll-probe"),s=e("mlellipsis/mlellipsis");e("lazyload/jquery.lazyload"),t.initAndroid=function(){n(function(){var e,t,i,a,l=n("#login-tip"),d=n("#is-login").val();d=d?d:"N";var r=n("#link-container"),c=r.find(".avatar"),u=r.find(".name"),f=r.find(".intro");c.outerWidth(!0)+u.outerWidth(!0)+f.outerWidth(!0)>n(window).width()&&f.css("padding-top",0);var h,p,g,m,y,v=!0,A={};n("#wrapper").removeClass("no-android"),s.init(),n(".post-list").find("span").each(function(){this.mlellipsis(2)}),n(".brand-name").each(function(){this.mlellipsis(1)}),o(),e=n(window).height(),t=n(window).width(),i=l.height(),a=l.width(),l.css({top:(e-i)/2,left:(t-a)/2}),n(".good-list, .prod-list").delegate(".good-islike","touchstart",function(e){var t,i,o;"N"===d&&(t=n(e.currentTarget),i=t.closest(".good-info"),o=i.data("id"),n.ajax({type:"GET",url:"/favorite/product",data:{st:1,product_skn:o}}).then(function(e){200===e.code?t.toggleClass("good-like"):400===e.code&&n("#login-tip").fadeIn(500,function(){setTimeout(function(){n("#login-tip").fadeOut(500)},1e3)})}))}).delegate(".good-islike","click",function(e){"Y"===d&&e.preventDefault()}),h=n(".article-type-three"),0!==h.length&&(p=h.find(".thumb-container"),g=h.find(".prod-list"),m=p.find("li").width(),y=function(e){var i=e.offset().left,o=-t+i+m/2+"px";p.css({backgroundPosition:o+" bottom"})},p.delegate(".thumb","click",function(){var e,t;e=n(this),t=e.index(),p.find(".thumb").removeClass("focus"),e.addClass("focus"),y(e),g.find(".prod").addClass("hide").eq(t).removeClass("hide"),A[t]||(A[t]=!0,o(g.find(".prod:eq("+t+") img.lazy"))),v?v=!1:n("body").animate({scrollTop:h.offset().top},400)}),p.find(".thumb:first-child").click())})},t.initOther=function(){var e,t,i,l,d,r=!0,c=n("");n(function(){function a(e){var o,a=n(e.currentTarget),s=a.index();o=a.closest(".fixed-thumb-container").length>0?t.find(".thumb:eq("+s+")"):c.find(".thumb:eq("+s+")"),m.removeClass("focus"),a.addClass("focus"),o.addClass("focus"),y(a),i.find(".prod").addClass("hide").eq(s).removeClass("hide"),A?A=!1:d&&(d.scrollToElement(C,400),d.refresh())}var u,f,h,p=n("#login-tip"),g=n("#is-login").val();g=g?g:"N";var m,y,v,A=!0,C=document.querySelector("#wrapper .article-type-three"),b=n("#link-container"),w=b.find(".avatar"),x=b.find(".name"),k=b.find(".intro");w.outerWidth(!0)+x.outerWidth(!0)+k.outerWidth(!0)>n(window).width()&&k.css("padding-top",0),o(),s.init(),n(".post-list").find("span").each(function(){this.mlellipsis(2)}),n(".brand-name").each(function(){this.mlellipsis(1)}),l=n(window).height(),u=n(window).width(),f=p.height(),h=p.width(),p.css({top:(l-f)/2,left:(u-h)/2}),n(".good-list, .prod-list").delegate(".good-islike","touchstart",function(e){var t,i,o;"N"===g&&(t=n(e.currentTarget),i=t.closest(".good-info"),o=i.data("id"),n.ajax({type:"GET",url:"/favorite/product",data:{st:1,product_skn:o}}).then(function(e){200===e.code?t.toggleClass("good-like"):400===e.code&&n("#login-tip").fadeIn(500,function(){setTimeout(function(){n("#login-tip").fadeOut(500)},1e3)})}))}).delegate(".good-islike","click",function(e){"Y"===g&&e.preventDefault()}),e=n(".article-type-three"),r=e.length>0?!0:!1,t=e.find(".thumb-container"),i=e.find(".prod-list"),c=n("#wrapper").after(t.clone().addClass("fixed-thumb-container fixed-bottom hide")).next(".thumb-container"),m=n(".thumb"),c.find("li").each(function(){var e=n(this).children("img.lazy");e.attr("src",e.attr("data-original"))}),v=t.find("li").width(),y=function(e){var i=e.offset().left,o=-u+i+v/2+"px";t.css({backgroundPosition:o+" bottom"}),c.css({backgroundPosition:o+" bottom"})},m.click(a),t.find(".thumb:first-child").click()}),window.onload=function(){function i(){c.removeClass("fixed-top fixed-bottom absolute hide").css("top","")}var o,s,u;return d=new a("#wrapper",{probeType:3,mouseWheel:!0,click:!0}),document.addEventListener("touchmove",function(e){e.preventDefault()},!1),r?(o=t.outerHeight(),s=e.height(),u=e.offset().top,d.on("scroll",function(){var e=-this.y;i(),u-l+o>=e?c.addClass("fixed-bottom"):u>=e?c.addClass("hide"):u+s-o>=e?c.addClass("fixed-top"):u+s>=e?c.addClass("absolute").css({top:u+s-o-e}):e>u+s&&c.addClass("hide"),n("#scroller").trigger("scroll")}),void d.scrollTo(0,0,.1)):void d.on("scroll",function(){n("#scroller").trigger("scroll")})}};var l=navigator.userAgent;l.indexOf("Android")>-1||l.indexOf("Linux")>-1?t.initAndroid():t.initOther()}),define("yohobuy-mobile/js/tag",["jquery/jquery","mlellipsis/mlellipsis","flexslider/jquery.flexslider","mustache/mustache","nprogress-183/nprogress","jquery-pjax-183/index","lazyload/jquery.lazyload","import-style/index"],function(e,t,i){var o=e("jquery/jquery"),n=e("mlellipsis/mlellipsis"),a=(e("flexslider/jquery.flexslider"),e("mustache/mustache")),s=e("nprogress-183/nprogress");e("jquery-pjax-183/index"),e("lazyload/jquery.lazyload"),t.init=function(){var e,t=function(){function t(e){var t;t="undefined"==typeof e?o("img.lazy"):e,t.lazyload({effect:"fadeIn",effect_speed:10,placeholder:"data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///93d3f///yH5BAEAAAMALAAAAAABAAEAAAICVAEAOw=="})}function i(){var i,n=l.find(".tag-content").length;i=m?{page:++C,id:s,sort_id:k,client_type:x}:{page:++C,query:b,gender:w,sort_id:k,client_type:x},p=!1,o.ajax({type:"GET",url:"/tag",dataType:"json",data:i}).then(function(i){var o,s,d,r="";if(200===i.code){for(o=i.data,o.end&&(g=!0,u.addClass("hide"),c.removeClass("hide")),s=o.content,d=0;d<s.length;d++)r+=a.render(e,s[d]);""!==r&&(l.append(r),t(l.find(".tag-content:gt("+(n-1)+") img.lazy")),l.find(".tag-text, .tag-title").each(function(){this.mlellipsis(2)})),p=!0}})}var s,l=o("#tag-list"),d=o("#load-more-info"),r=d.children(".status"),c=r.filter(".no-more"),u=r.filter(".loading"),f=o(window).height(),h=d.height(),p=!0,g=!1,m=!1;o(".flexslider").flexslider({animation:"slide",directionNav:!1}),o("#author-infos").length>0&&(m=!0,s=o("#author-infos").data("id"));var y,v,A,C=1,b=o("#query").val(),w=o("#gender").val(),x=o("#client-type").val(),k=o("#sort_id").val(),j=o("#login-tip");y=o(window).width(),v=j.height(),A=j.width(),j.css({top:(f-v)/2,left:(y-A)/2}),o.get("/common/tagtpl",function(t){e=t,a.parse(e)}),t(),n.init(),o(".tag-text, .tag-title").each(function(){this.mlellipsis(2)}),o(".tag-container").delegate(".like-btn","touchstart",function(e){var t=o(e.currentTarget),i=t.closest(".tag-content"),n=i.data("id");return t.hasClass("like")?(t.next("span.like-count").text(""),void t.toggleClass("like")):void o.ajax({type:"GET",url:"/favorite/praise",data:{id:n}}).then(function(e){200===e.code?(t.toggleClass("like"),t.next("span.like-count").text(e.data)):400===e.code&&o("#login-tip").fadeIn(500,function(){setTimeout(function(){o("#login-tip").fadeOut(500)},1e3)})})}),o(document).on("scroll",function(){p&&!g&&o(window).scrollTop()+f>=o(document).height()-h&&i()}),o(document).height()===f?o(document).one("touchmove",function(){p&&!g&&(u.removeClass("hide"),i())}):u.removeClass("hide")};o(function(){o(document).pjax("a","#pjax-container"),o(document).on("pjax:start",function(){s.start()}),o(document).on("pjax:end",function(){s.done(),t()}),t()})},t.init()}),define("yohobuy-mobile/js/ps",["jquery/jquery","mustache/mustache","mlellipsis/mlellipsis","lazyload/jquery.lazyload"],function(e,t,i){var o=e("jquery/jquery"),n=e("mustache/mustache"),a=e("mlellipsis/mlellipsis");e("lazyload/jquery.lazyload"),t.init=function(){o(function(){function e(){d.toggleClass("show"),d.hasClass("show")?(l.text(i),r.text("收起"),u.addClass("hide"),c.removeClass("hide")):(l.text(t),r.text("more"),c.addClass("hide"),u.removeClass("hide"))}var t,i,s,l=o("#intro"),d=o("#more-intro"),r=d.find(".more-intro-text"),c=d.find(".up"),u=d.find(".down"),f=o(window).height(),h=o("#is-login").val();h=h?h:"N";var p,g,m,y=o("#login-tip");o.get("/common/articletpl",function(e){s=e,n.parse(s)}),a.init(),l[0].mlellipsis(3),o(".info-block-content, .info-block-title").each(function(){this.mlellipsis(2)}),setTimeout(function(){t=l.text(),i=l.attr("title")},0),o("img.lazy").lazyload({effect:"fadeIn",effect_speed:10,placeholder:"data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///93d3f///yH5BAEAAAMALAAAAAABAAEAAAICVAEAOw=="}),i=l.attr("_title"),d.delegate(".more","click",function(){e()}),p=o(window).width(),g=y.height(),m=y.width(),y.css({top:(f-g)/2,left:(p-m)/2}),o(".new-arrival-content").delegate(".good-islike","touchstart",function(e){var t,i,n;"N"===h&&(t=o(e.currentTarget),i=t.closest(".good-info"),n=i.data("id"),o.ajax({type:"GET",url:"/favorite/product",data:{st:0,product_skn:n}}).then(function(e){200===e.code?t.toggleClass("good-like"):400===e.code&&o("#login-tip").fadeIn(500,function(){setTimeout(function(){o("#login-tip").fadeOut(500)},1e3)})}))}).delegate(".good-islike","click",function(e){"N"===h&&e.preventDefault()}),o("#info-content").delegate(".like-btn","touchstart",function(e){var t=o(e.currentTarget),i=t.closest(".info-block"),n=i.data("id");return t.hasClass("like")?(t.next("span.like-count").text(""),void t.toggleClass("like")):void o.ajax({type:"GET",url:"/favorite/praise",data:{id:n}}).then(function(e){200===e.code?(t.toggleClass("like"),t.next("span.like-count").text(e.data)):400===e.code&&o("#login-tip").fadeIn(500,function(){setTimeout(function(){o("#login-tip").fadeOut(500)},1e3)})})}),o("#brand-like").bind("touchstart",function(e){var t,i;"Y"===h&&(t=o(this),i=o(this).closest(".brand-info").data("id"),o.ajax({type:"GET",url:"/favorite/brand",data:{brand_id:i}}).then(function(e){200===e.code?t.toggleClass("like"):400===e.code&&o("#login-tip").fadeIn(500,function(){setTimeout(function(){o("#login-tip").fadeOut(500)},1e3)})}))}).bind("click",function(e){"Y"===h&&e.preventDefault()})})},t.init()}),define("yohobuy-mobile/js/template",["jquery/jquery","underscore/underscore","mlellipsis/mlellipsis","mustache/mustache","lazyload/jquery.lazyload"],function(e,t,i){var o=e("jquery/jquery"),n=e("underscore/underscore"),a=e("mlellipsis/mlellipsis"),s=e("mustache/mustache");e("lazyload/jquery.lazyload"),t.init=function(){o(function(){function e(e,t){var i,n={effect:"fadeIn",effect_speed:10,placeholder:"data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///93d3f///yH5BAEAAAMALAAAAAABAAEAAAICVAEAOw=="};i="undefined"==typeof e?o("img.lazy"):e,"undefined"!=typeof t&&o.extend(n,t),i.lazyload(n)}function t(e){var t=0,i="";for(t=0;t<e.length;t++)i+=s.render(_,e[t]);return i}function i(){var e;return B.hasClass("sales-volume-nav")?e="sale":B.hasClass("price-nav")?e="price":B.hasClass("new-patterns-nav")&&(e="newest"),e}function l(t){var n,a=i(),l={},d=0;n=I[a],n.reload&&(n.start=0,n.end=!1,n.empty=!1),o.extend(l,O,{type:a,direction:n.direction,start:n.start+1,promotionId:P,clientType:W,contentCode:L}),n.end?(x.addClass("hide"),w.removeClass("hide")):(x.removeClass("hide"),w.addClass("hide")),n.end&&n.empty&&w.addClass("hide"),(n.reload||!n.end)&&(N=!1,o.ajax({type:"GET",url:"/activity/search",data:l}).then(function(i){var o,a,r,c,u,f="";if(i.success){switch(a=i.data,r=a.goods,c=r.length,l.type){case"newest":o=y;break;case"price":o=A;break;case"sale":o=v}if(t||0!==c)for(n.empty=!1,d=o.find(".good-info").length,u=0;c>u;u++)f+=s.render(h,r[u]);else n.empty=!0,f='<p class="search-tip">未找到相关搜索结果</p>';n.reload||!t&&0===c?(d=0,o.html(f)):o.append(f),e(0===d?o.find(".good-info img.lazy"):o.find(".good-info:gt("+(d-1)+") img.lazy")),a.end&&(n.end=!0,x.addClass("hide"),t||0!==c?w.removeClass("hide"):w.addClass("hide")),n.reload=!1,n.start++,N=!0}}))}function d(e){var t,o=i(),n=I[o];e.find(".sort i").toggleClass("cur"),t=e.find(".sort .cur").hasClass("up")?1:0,n.direction=t,n.reload=!0,l()}function r(e){var t,n=o(e.currentTarget);if(n.hasClass("screen-nav"))G.toggleClass("hide"),B.toggleClass("focus"),n.toggleClass("focus");else{if(n.hasClass("focus"))return void(n.hasClass("price-nav")&&d(n));switch(B=n,p.removeClass("focus"),n.addClass("focus"),t=i(),m.addClass("hide"),t){case"newest":y.removeClass("hide");break;case"sale":v.removeClass("hide");break;case"price":A.removeClass("hide")}I[t].reload&&l()}}function c(e){var t,i=o(e.currentTarget),a=["brand","msort","color","size","price","discount"];i.hasClass("active")||(o("#screen-content .c-item").removeClass("active"),i.addClass("active"),t=n.filter(a,function(e){return i.hasClass(e)}),o(".sub-classify:not(.hide)").addClass("hide"),o("#sub-"+t).removeClass("hide"))}function u(e,t,i,n){var a,s=o("#show-"+t);O[t]=e,0===e?s.addClass("default"):s.removeClass("default"),s.text(i);for(a in I)I.hasOwnProperty(a)&&(I[a].reload=!0);l()}function f(e){var t=o(e.currentTarget),i=t.closest("ul"),n=t.data("id"),a=i.data("type"),s=t.children(".text").text();i.children("li.chosed").removeClass("chosed"),t.addClass("chosed"),u(n,a,s)}var h,p=o("#goods-nav .nav-item"),g=o("#goods-content"),m=o("#goods-content > div"),y=m.filter(".new-patterns-container"),v=m.filter(".sales-volume-container"),A=m.filter(".price-container"),C=o("#load-more-info"),b=C.children(".status"),w=b.filter(".no-more"),x=b.filter(".loading"),k=C.height(),j=o("#is-login").val();j=j?j:"N";var q,T,z,E,O={brand:"",msort:"",color:"",size:"",price:"",discount:""},I={newest:{direction:0,reload:!1,start:1,end:!1,empty:!1},sale:{direction:0,reload:!0,start:0,end:!1,empty:!0},price:{direction:1,reload:!0,start:0,end:!1,empty:!0}},_='<li class="{{^ id}}chosed{{/ id}}" data-id="{{id}}"><span class="text">{{name}}</span><span><i class="chosed-icon iconfont">&#xe60a;</i></span></li>',G=o("#screen-content, #screen-mask"),B=p.filter(".focus"),D=o(window).height(),N=!0,P=o("#promotion").val(),W=o("#client-type").val(),L=o("#content-code").val(),Y=o("#login-tip");D=o(window).height(),T=o(window).width(),z=Y.height(),E=Y.width(),Y.css({top:(D-z)/2,left:(T-E)/2}),e(),a.init(),o(".reco .name").each(function(){this.mlellipsis(2)}),o(".brand-name").each(function(){this.mlellipsis(1)}),o.get("/common/goodinfo",function(e){h=e,s.parse(h)}),s.parse(_),o.get("/activity/classification",{promotionId:P,clientType:W},function(e){var i;if(e.success){q=e.data;for(i in q)q.hasOwnProperty(i)&&o("#sub-"+i).html(t(q[i]))}}),o("#goods-nav").delegate(".nav-item","click",function(e){r(e)}),o("#screen-content").delegate(".c-item","click",function(e){c(e)}),o(".sub-classify").delegate("li","click",function(e){f(e),p.filter(".screen-nav").click()}),o(document).scroll(function(e){N&&o(window).scrollTop()+D>=o(document).height()-.33*g.height()-k&&l(!0)}),o("#screen-mask").click(function(){p.filter(".screen-nav").click()}),o("#goods-content").delegate(".good-islike","touchstart",function(e){var t,i,n;"Y"===j&&(t=o(e.currentTarget),i=t.closest(".good-info"),n=i.data("id"),o.ajax({type:"GET",url:"/favorite/product",data:{product_skn:n}}).then(function(e){200===e.code?t.toggleClass("good-like"):400===e.code&&o("#login-tip").fadeIn(500,function(){setTimeout(function(){o("#login-tip").fadeOut(500)},1e3)})}))}).delegate(".good-islike","click",function(e){"Y"===j&&e.preventDefault()})})},t.init()});